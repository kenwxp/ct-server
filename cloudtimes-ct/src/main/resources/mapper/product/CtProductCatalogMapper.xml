<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cloudtimes.product.mapper.CtProductCatalogMapper">
    <sql id="selectCtProductCatalogVo">
        select * from ct_product_catalog
    </sql>

    <select id="selectCtProductCatalogList" parameterType="CtProductCatalog" resultType="CtProductCatalog">
        <include refid="selectCtProductCatalogVo"/>
        <where>  
            <if test="barcode != null  and barcode != ''"> and barcode = #{barcode}</if>
            <if test="productName != null  and productName != ''"> and product_name like concat('%', #{productName}, '%')</if>
            <if test="englishName != null  and englishName != ''"> and english_name like concat('%', #{englishName}, '%')</if>
            <if test="productBrand != null  and productBrand != ''"> and product_brand = #{productBrand}</if>
            <if test="categoryCode != null  and categoryCode != ''"> and category_code = #{categoryCode}</if>
            <if test="manufacturer != null  and manufacturer != ''"> and manufacturer = #{manufacturer}</if>
            <if test="originCountry != null  and originCountry != ''"> and origin_country = #{originCountry}</if>
            <if test="specification != null  and specification != ''"> and specification = #{specification}</if>
            <if test="unit != null  and unit != ''"> and unit = #{unit}</if>
            <if test="weight != null  and weight != ''"> and weight = #{weight}</if>
            <if test="listingDate != null "> and listing_date = #{listingDate}</if>
            <if test="retailPrice != null "> and retail_price = #{retailPrice}</if>
            <if test="pictureUrl != null  and pictureUrl != ''"> and picture_url = #{pictureUrl}</if>
            <if test="remarks != null  and remarks != ''"> and remarks = #{remarks}</if>
        </where>
    </select>
    
    <select id="selectCtProductCatalogByBarcode" parameterType="String" resultType="CtProductCatalog">
        <include refid="selectCtProductCatalogVo"/>
        where barcode = #{barcode}
    </select>
        
    <insert id="insertCtProductCatalog" parameterType="CtProductCatalog">
        insert into ct_product_catalog
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="barcode != null and barcode != ''">barcode,</if>
            <if test="productName != null and productName != ''">product_name,</if>
            <if test="englishName != null">english_name,</if>
            <if test="productBrand != null">product_brand,</if>
            <if test="categoryCode != null and categoryCode != ''">category_code,</if>
            <if test="manufacturer != null">manufacturer,</if>
            <if test="originCountry != null">origin_country,</if>
            <if test="specification != null">specification,</if>
            <if test="unit != null">unit,</if>
            <if test="weight != null">weight,</if>
            <if test="listingDate != null">listing_date,</if>
            <if test="retailPrice != null">retail_price,</if>
            <if test="pictureUrl != null">picture_url,</if>
            <if test="remarks != null">remarks,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateTime != null">update_time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="barcode != null and barcode != ''">#{barcode},</if>
            <if test="productName != null and productName != ''">#{productName},</if>
            <if test="englishName != null">#{englishName},</if>
            <if test="productBrand != null">#{productBrand},</if>
            <if test="categoryCode != null and categoryCode != ''">#{categoryCode},</if>
            <if test="manufacturer != null">#{manufacturer},</if>
            <if test="originCountry != null">#{originCountry},</if>
            <if test="specification != null">#{specification},</if>
            <if test="unit != null">#{unit},</if>
            <if test="weight != null">#{weight},</if>
            <if test="listingDate != null">#{listingDate},</if>
            <if test="retailPrice != null">#{retailPrice},</if>
            <if test="pictureUrl != null">#{pictureUrl},</if>
            <if test="remarks != null">#{remarks},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateTime != null">#{updateTime},</if>
         </trim>
    </insert>

    <update id="updateCtProductCatalog" parameterType="CtProductCatalog">
        update ct_product_catalog
        <trim prefix="SET" suffixOverrides=",">
            <if test="productName != null and productName != ''">product_name = #{productName},</if>
            <if test="englishName != null">english_name = #{englishName},</if>
            <if test="productBrand != null">product_brand = #{productBrand},</if>
            <if test="categoryCode != null and categoryCode != ''">category_code = #{categoryCode},</if>
            <if test="manufacturer != null">manufacturer = #{manufacturer},</if>
            <if test="originCountry != null">origin_country = #{originCountry},</if>
            <if test="specification != null">specification = #{specification},</if>
            <if test="unit != null">unit = #{unit},</if>
            <if test="weight != null">weight = #{weight},</if>
            <if test="listingDate != null">listing_date = #{listingDate},</if>
            <if test="retailPrice != null">retail_price = #{retailPrice},</if>
            <if test="pictureUrl != null">picture_url = #{pictureUrl},</if>
            <if test="remarks != null">remarks = #{remarks},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
        </trim>
        where barcode = #{barcode}
    </update>
</mapper>