<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cloudtimes.product.mapper.CtProductCatalogMapper">
    
    <resultMap type="CtProductCatalog" id="CtProductCatalogResult">
        <result property="id"    column="id"    />
        <result property="barcode"    column="barcode"    />
        <result property="productName"    column="product_name"    />
        <result property="englishName"    column="english_name"    />
        <result property="productBrand"    column="product_brand"    />
        <result property="productCode"    column="product_code"    />
        <result property="manufacturer"    column="manufacturer"    />
        <result property="originCountry"    column="origin_country"    />
        <result property="specification"    column="specification"    />
        <result property="unit"    column="unit"    />
        <result property="weight"    column="weight"    />
        <result property="listingDate"    column="listing_date"    />
        <result property="retailPrice"    column="retail_price"    />
        <result property="pictureUrl"    column="picture_url"    />
        <result property="remarks"    column="remarks"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateTime"    column="update_time"    />
    </resultMap>

    <sql id="selectCtProductCatalogVo">
        select id, barcode, product_name, english_name, product_brand, product_code, manufacturer, origin_country, specification, unit, weight, listing_date, retail_price, picture_url, remarks, create_time, update_time from ct_product_catalog
    </sql>

    <select id="selectCtProductCatalogList" parameterType="CtProductCatalog" resultMap="CtProductCatalogResult">
        <include refid="selectCtProductCatalogVo"/>
        <where>  
            <if test="barcode != null  and barcode != ''"> and barcode = #{barcode}</if>
            <if test="productName != null  and productName != ''"> and product_name like concat('%', #{productName}, '%')</if>
            <if test="englishName != null  and englishName != ''"> and english_name like concat('%', #{englishName}, '%')</if>
            <if test="productBrand != null  and productBrand != ''"> and product_brand = #{productBrand}</if>
            <if test="productCode != null  and productCode != ''"> and product_code = #{productCode}</if>
            <if test="manufacturer != null  and manufacturer != ''"> and manufacturer = #{manufacturer}</if>
            <if test="originCountry != null  and originCountry != ''"> and origin_country = #{originCountry}</if>
            <if test="specification != null  and specification != ''"> and specification = #{specification}</if>
            <if test="unit != null  and unit != ''"> and unit = #{unit}</if>
            <if test="weight != null  and weight != ''"> and weight = #{weight}</if>
            <if test="listingDate != null "> and listing_date = #{listingDate}</if>
            <if test="retailPrice != null "> and retail_price = #{retailPrice}</if>
            <if test="pictureUrl != null  and pictureUrl != ''"> and picture_url = #{pictureUrl}</if>
            <if test="remarks != null  and remarks != ''"> and remarks = #{remarks}</if>
        </where>
    </select>
    
    <select id="selectCtProductCatalogById" parameterType="String" resultMap="CtProductCatalogResult">
        <include refid="selectCtProductCatalogVo"/>
        where id = #{id}
    </select>
        
    <insert id="insertCtProductCatalog" parameterType="CtProductCatalog">
        insert into ct_product_catalog
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">id,</if>
            <if test="barcode != null and barcode != ''">barcode,</if>
            <if test="productName != null and productName != ''">product_name,</if>
            <if test="englishName != null">english_name,</if>
            <if test="productBrand != null">product_brand,</if>
            <if test="productCode != null and productCode != ''">product_code,</if>
            <if test="manufacturer != null">manufacturer,</if>
            <if test="originCountry != null">origin_country,</if>
            <if test="specification != null">specification,</if>
            <if test="unit != null">unit,</if>
            <if test="weight != null">weight,</if>
            <if test="listingDate != null">listing_date,</if>
            <if test="retailPrice != null">retail_price,</if>
            <if test="pictureUrl != null">picture_url,</if>
            <if test="remarks != null">remarks,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateTime != null">update_time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">#{id},</if>
            <if test="barcode != null and barcode != ''">#{barcode},</if>
            <if test="productName != null and productName != ''">#{productName},</if>
            <if test="englishName != null">#{englishName},</if>
            <if test="productBrand != null">#{productBrand},</if>
            <if test="productCode != null and productCode != ''">#{productCode},</if>
            <if test="manufacturer != null">#{manufacturer},</if>
            <if test="originCountry != null">#{originCountry},</if>
            <if test="specification != null">#{specification},</if>
            <if test="unit != null">#{unit},</if>
            <if test="weight != null">#{weight},</if>
            <if test="listingDate != null">#{listingDate},</if>
            <if test="retailPrice != null">#{retailPrice},</if>
            <if test="pictureUrl != null">#{pictureUrl},</if>
            <if test="remarks != null">#{remarks},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateTime != null">#{updateTime},</if>
         </trim>
    </insert>

    <update id="updateCtProductCatalog" parameterType="CtProductCatalog">
        update ct_product_catalog
        <trim prefix="SET" suffixOverrides=",">
            <if test="barcode != null and barcode != ''">barcode = #{barcode},</if>
            <if test="productName != null and productName != ''">product_name = #{productName},</if>
            <if test="englishName != null">english_name = #{englishName},</if>
            <if test="productBrand != null">product_brand = #{productBrand},</if>
            <if test="productCode != null and productCode != ''">product_code = #{productCode},</if>
            <if test="manufacturer != null">manufacturer = #{manufacturer},</if>
            <if test="originCountry != null">origin_country = #{originCountry},</if>
            <if test="specification != null">specification = #{specification},</if>
            <if test="unit != null">unit = #{unit},</if>
            <if test="weight != null">weight = #{weight},</if>
            <if test="listingDate != null">listing_date = #{listingDate},</if>
            <if test="retailPrice != null">retail_price = #{retailPrice},</if>
            <if test="pictureUrl != null">picture_url = #{pictureUrl},</if>
            <if test="remarks != null">remarks = #{remarks},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteCtProductCatalogById" parameterType="String">
        delete from ct_product_catalog where id = #{id}
    </delete>

    <delete id="deleteCtProductCatalogByIds" parameterType="String">
        delete from ct_product_catalog where id in 
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>